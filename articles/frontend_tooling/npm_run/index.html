<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Automation with npm run Scripts</title>
    
        <link rel="icon"
              href="../../../_static/jetbrains_favicon.ico"/>
    
    <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css"
          rel="stylesheet">
    <script src="../../../_static/kaybee_bulma.bundle.js"></script>
    <script src="../../../_static/app.bundle.js"></script>
</head>
<body>

<section>
    <nav id="kbb-navbar" class="navbar is-light"
     role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="../../../index.html">
            
            <img src="../../../_static/PyCharm_Logo.svg.png"
                 alt="PyCharm Logo Alt">
        </a>
        <button class="button navbar-burger" data-target="navMenu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
    <div class="navbar-menu" id="navMenu">
        <div class="navbar-start">
            
                <a class="navbar-item"
                   href="../../../tips/index.html">
                    Tips
                </a>
            
                <a class="navbar-item"
                   href="../../../tutorials/index.html">
                    Tutorials
                </a>
            
                <a class="navbar-item is-active"
                   href="../../index.html">
                    Articles
                </a>
            
                <a class="navbar-item"
                   href="../../../blogposts/index.html">
                    Blog Posts
                </a>
            
                <a class="navbar-item"
                   href="../../../webinars/index.html">
                    Webinars
                </a>
            
                <a class="navbar-item"
                   href="../../../technologies/index.html">
                    Technologies
                </a>
            
                <a class="navbar-item"
                   href="../../../topics/index.html">
                    Topics
                </a>
            
                <a class="navbar-item"
                   href="../../../authors/index.html">
                    Authors
                </a>
            

        </div>

        <div class="navbar-end">
            
            
        </div>
    </div>
</nav>
</section>
<section
        class="hero is-light"
        style="">
    <div class="hero-head">
    </div>
    
</section>

<section class="section content pcarticle"
         id="kbb-sphinx-body">
    
    <div class="container">
        <div class="columns">
            <div class="column sb_body">
                <div class="title is-1">
                    Automation with npm run Scripts
                    
    <span style="background-color: orange; color: white; font-weight: bold;
    font-size: x-small; padding: 0.5em; vertical-align: middle;
    border-radius: 25px">PRO ONLY</span>

                </div>

                <div class="subtitle is-4">Using the IDE to browse and execute small scripts in package.json</div>

                <div id="kbb-sphinx-body" class="content"><div class="section" id="automation-with-npm-run-scripts">
<h1>Automation with npm run Scripts<a class="headerlink" href="#automation-with-npm-run-scripts" title="Permalink to this headline">¶</a></h1>
<p>Python has several ways to register custom scripts to execute during
development in a workspace. In this section we look at <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span></code>
scripts, registered in <code class="docutils literal notranslate"><span class="pre">package.json</span></code>, for centralizing repeatable
frontend tasks.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Explain <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span></code> scripts in the  <code class="docutils literal notranslate"><span class="pre">scripts</span></code> block of <code class="docutils literal notranslate"><span class="pre">package.json</span></code></li>
<li>Install a linter and hook into an <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span></code> script</li>
<li>Show how PyCharm puts a friendly face on such task scripts</li>
<li>Explain the subtle benefit to <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span></code> as a uniform interface</li>
</ul>
</div>
<div class="section" id="python-command-line-scripts">
<h2>Python Command Line Scripts<a class="headerlink" href="#python-command-line-scripts" title="Permalink to this headline">¶</a></h2>
<p>Let’s say you have some tasks you do frequently during development:</p>
<ul class="simple">
<li>Run a linter to check for errors or style warnings</li>
<li>Start a development server</li>
<li>Run tests</li>
<li>Package a release and publish to PyPi</li>
</ul>
<p>You’d like to save yourself some work by automating these steps.
Even better, you are on a development team and you’d like the
automation to be in a natural, easily-discoverable place.</p>
<p>In Python…well, this is a lesser-known neighborhood. Python has
two main facilities for command-line scripts:</p>
<ul class="simple">
<li>Use <a class="reference external" href="https://docs.python.org/2/distutils/extending.html#integrating-new-commands">setuptools cmdclass</a>
to register a command that can be run as an argument to <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>,
for example <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">lint</span></code></li>
<li>Register a <a class="reference external" href="http://python-packaging.readthedocs.org/en/latest/command-line-scripts.html#the-console-scripts-entry-point">console script</a>
to be added into your Python or virtualenv’s <code class="docutils literal notranslate"><span class="pre">bin</span></code> directory</li>
</ul>
<p>These approaches suffer from some of the historical baggage of
<code class="docutils literal notranslate"><span class="pre">distutils</span></code> and <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>, plus they are a bit clunky. As such,
you don’t often encounter them at the beginner or intermediate level in
Python.</p>
<p>Let’s take a look at how to approach this in the frontend world.</p>
</div>
<div class="section" id="npm-run-scripts">
<h2><code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span></code> scripts<a class="headerlink" href="#npm-run-scripts" title="Permalink to this headline">¶</a></h2>
<p>As mentioned in the <a class="reference internal" href="../package_json/index.html"><span class="doc">package.json intro</span></a>
article, the <code class="docutils literal notranslate"><span class="pre">package.json</span></code> configuration file can contain more than
just package name and dependency information.</p>
<p>Let’s take a look at the auto-generated <code class="docutils literal notranslate"><span class="pre">package.json</span></code> file from the
<a class="reference internal" href="../eslint/index.html"><span class="doc">the ESLint article</span></a>:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Earlier ESLint package.json</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;pylyglot&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
  <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Series of articles for Polyglot Python with PyCharm&quot;</span><span class="p">,</span>
  <span class="s2">&quot;main&quot;</span><span class="o">:</span> <span class="s2">&quot;index.js&quot;</span><span class="p">,</span>
<span class="hll">  <span class="s2">&quot;scripts&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class="hll">    <span class="s2">&quot;test&quot;</span><span class="o">:</span> <span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
</span><span class="hll">  <span class="p">},</span>
</span>  <span class="s2">&quot;repository&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;git&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url&quot;</span><span class="o">:</span> <span class="s2">&quot;git+ssh://git@github.com/pauleveritt/pauleveritt.github.io.git&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;author&quot;</span><span class="o">:</span> <span class="s2">&quot;Paul Everitt&quot;</span><span class="p">,</span>
  <span class="s2">&quot;license&quot;</span><span class="o">:</span> <span class="s2">&quot;ISC&quot;</span><span class="p">,</span>
  <span class="s2">&quot;bugs&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;url&quot;</span><span class="o">:</span> <span class="s2">&quot;https://github.com/pauleveritt/pauleveritt.github.io/issues&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;homepage&quot;</span><span class="o">:</span> <span class="s2">&quot;https://github.com/pauleveritt/pauleveritt.github.io#readme&quot;</span><span class="p">,</span>
  <span class="s2">&quot;devDependencies&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;eslint&quot;</span><span class="o">:</span> <span class="s2">&quot;^1.10.3&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">init</span></code> created a <code class="docutils literal notranslate"><span class="pre">scripts</span></code> section in your package
file. In there, it registered one “run command”: a <code class="docutils literal notranslate"><span class="pre">test</span></code> command.
With that <code class="docutils literal notranslate"><span class="pre">package.json</span></code> file, you could execute the <code class="docutils literal notranslate"><span class="pre">echo</span></code> command
via <code class="docutils literal notranslate"><span class="pre">npm</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ npm run <span class="nb">test</span>
</pre></div>
</div>
<img alt="Screenshot npm run test" src="../../../_images/npm_run_test.png" />
<p>Note how similar this command’s structure looks to Python’s <code class="docutils literal notranslate"><span class="pre">python</span>
<span class="pre">setup.py</span> <span class="pre">test</span></code>: an executable, followed by an argument, followed by the
custom, plugged-in target.</p>
<p>As explained in the <a class="reference external" href="https://docs.npmjs.com/misc/scripts">npm run</a>
documentation, certain
<code class="docutils literal notranslate"><span class="pre">script</span></code> values such as <code class="docutils literal notranslate"><span class="pre">test</span></code> are pre-defined as a discoverable
interface, such as <code class="docutils literal notranslate"><span class="pre">test</span></code>, <code class="docutils literal notranslate"><span class="pre">start</span></code>, etc. For these, we can skip
<code class="docutils literal notranslate"><span class="pre">run</span></code> and just say:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ npm <span class="nb">test</span>
</pre></div>
</div>
<p>For these certain, common tasks, you can walk up to a package and
run <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">&lt;taskname&gt;</span></code>, knowing that the project wired up that task
to do the task with some working implementation.</p>
</div>
<div class="section" id="linting-revisited">
<h2>Linting, Revisited<a class="headerlink" href="#linting-revisited" title="Permalink to this headline">¶</a></h2>
<p>We can now register a script, both to simplify running our linter
but to also advertise this task to people that use our project. Let’s
replace the (unimplemented) <code class="docutils literal notranslate"><span class="pre">test</span></code> entry in <code class="docutils literal notranslate"><span class="pre">package.json</span></code> with
a script for <code class="docutils literal notranslate"><span class="pre">lint</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">npm run package.json</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;pylyglot&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
  <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Series of articles for Polyglot Python with PyCharm&quot;</span><span class="p">,</span>
  <span class="s2">&quot;main&quot;</span><span class="o">:</span> <span class="s2">&quot;index.js&quot;</span><span class="p">,</span>
<span class="hll">  <span class="s2">&quot;scripts&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class="hll">    <span class="s2">&quot;lint&quot;</span><span class="o">:</span> <span class="s2">&quot;eslint app1.js&quot;</span>
</span><span class="hll">  <span class="p">},</span>
</span>  <span class="s2">&quot;repository&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;git&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url&quot;</span><span class="o">:</span> <span class="s2">&quot;git+ssh://git@github.com/pauleveritt/pauleveritt.github.io.git&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;author&quot;</span><span class="o">:</span> <span class="s2">&quot;Paul Everitt&quot;</span><span class="p">,</span>
  <span class="s2">&quot;license&quot;</span><span class="o">:</span> <span class="s2">&quot;ISC&quot;</span><span class="p">,</span>
  <span class="s2">&quot;bugs&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;url&quot;</span><span class="o">:</span> <span class="s2">&quot;https://github.com/pauleveritt/pauleveritt.github.io/issues&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;homepage&quot;</span><span class="o">:</span> <span class="s2">&quot;https://github.com/pauleveritt/pauleveritt.github.io#readme&quot;</span><span class="p">,</span>
  <span class="s2">&quot;devDependencies&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;eslint&quot;</span><span class="o">:</span> <span class="s2">&quot;^1.10.3&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Presuming we still have the same <code class="docutils literal notranslate"><span class="pre">.eslintrc</span></code> file configured:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">.eslintrc</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;rules&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;quotes&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;single&quot;</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>…then we can now run our linter from the command line in a simplified,
predicatable way:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ npm run lint
</pre></div>
</div>
<p>This gives the same resulting <code class="docutils literal notranslate"><span class="pre">eslint</span></code> output from the previous article:</p>
<img alt="Screenshot npm run lint" src="../../../_images/npm_run_lint.png" />
<p>Not in our <code class="docutils literal notranslate"><span class="pre">scripts</span></code> block that we didn’t have to specify the full
path to <code class="docutils literal notranslate"><span class="pre">node_modules/.bin/eslint</span></code>. When you run a script with
<code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span></code>, <code class="docutils literal notranslate"><span class="pre">node_modules/.bin</span></code> is added to the path automatically.
Also note that <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span></code> scripts don’t have to be JavaScript files:
as we saw in the boilerplate <code class="docutils literal notranslate"><span class="pre">test</span></code> command, it ran the system
<code class="docutils literal notranslate"><span class="pre">echo</span></code> command.</p>
<p>As you can see, this approach is far simpler and more “first class”
than Python automation. It still has rough edges. But it works
naturally for the basics.</p>
</div>
<div class="section" id="pycharm-automation">
<h2>PyCharm Automation<a class="headerlink" href="#pycharm-automation" title="Permalink to this headline">¶</a></h2>
<p>Because there is a central place to look for tasks, PyCharm can put
a UI on finding and running these tasks. Right-click on your
<code class="docutils literal notranslate"><span class="pre">package.json</span></code> file and you will see a menu option for
<code class="docutils literal notranslate"><span class="pre">Show</span> <span class="pre">npm</span> <span class="pre">scripts</span></code>. You then get a panel showing the registered
run scripts. Double-clicking them runs that script in a tool window:</p>
<iframe
        class="kbb-videoplayer"
        width="640"
        height="360"
        src="https://www.youtube.com/embed/4HVy4CKcBp4"
        frameborder="0"
        allowfullscreen>&nbsp;
</iframe><p>This workflow is very helpful. It’s nice to have the <code class="docutils literal notranslate"><span class="pre">npm</span></code> tool
window to browse your tasks, and of course, running a task in its
own run window is far better than running in the console.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you edit the scripts in <code class="docutils literal notranslate"><span class="pre">package.json</span></code>, you’ll have to
click the reload button in <code class="docutils literal notranslate"><span class="pre">npm</span></code> tool window.</p>
</div>
</div>
<div class="section" id="the-subtle-benefit">
<h2>The Subtle Benefit<a class="headerlink" href="#the-subtle-benefit" title="Permalink to this headline">¶</a></h2>
<p>Certainly when compared to Python’s approach to registering task
scripts, finding them, and running them, this <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span></code> script
approach is quite nice. It’s dead simple to make and use and
eliminates needing to type the full path. It can run tasks
implemented in JavaScript or any kind of executable on your path. As
such, it eliminates much of the need for task automation frameworks
such as <code class="docutils literal notranslate"><span class="pre">gulp</span></code> or <code class="docutils literal notranslate"><span class="pre">grunt</span></code>.</p>
<p>There is, though, a more subtle benefit. Your project now advertises
certain tasks it implements, registered with simple names, in
<em>configuration data file</em>, and in a predictable, standard location. Even
more, certain common task names are pre-defined. Choosing to implement
these means certain workflows, expected by tools like TravisCI, have a
“uniform interface”, similar to the benefit we get from the HTTP and REST
uniform interface.</p>
<p>Because tasks are in a data file in a predictable place, tools such as
PyCharm can scan, list, and launch your project’s tasks.</p>
</div>
<div class="section" id="wrapup">
<h2>Wrapup<a class="headerlink" href="#wrapup" title="Permalink to this headline">¶</a></h2>
<p>In this article we introduced task automation via <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span></code> scripts
registered in our package configuration file. We hooked up our linter
command to an automation script and showed the convenience PyCharm
adds for task automation.</p>
</div>
</div>
</div>

                

                
                
            </div>

            <div class="column is-3">
                <aside id="sidebarCollapseTarget" class="menu kbb-sidenav">

    <div id="kb-sidenav-published-heading">
    

    
        <p class="menu-label">
            Published
        </p>
        <ul class="menu-list">
            <li>
                Published on
                2018-02-26
                at
                12:00
                
                    by:
                    
                        <a href="../../../authors/pauleveritt/index.html">
                            <figure class="image is-rounded is-24x24"
                                    style="display: inline-block; margin: 0.5rem">
                                <img src="../../../authors/pauleveritt/paul_headshotx24.jpeg">
                            </figure>
                            <span
                                    style="display: inline-block; vertical-align: super">Paul Everitt</span>
                        </a>
                    
                
            </li>
        </ul>
    
</div>
    

    <p class="menu-label">
        Breadcrumbs
    </p>
    <ul class="menu-list">
            <li>
                <a href="../../index.html">
                    
                        <span class="kb-breadcrumb-separator">></span>
                    
                    Articles
                </a>
            </li>
            <li>
                <a href="../index.html">
                    
                        <span class="kb-breadcrumb-separator">></span>
                    
                        <span class="kb-breadcrumb-separator">></span>
                    
                    Frontend Tooling
                </a>
            </li>

    </ul>

    
    <p class="menu-label">
        Previous
    </p>
    <ul class="menu-list">
        <a href="../eslint/index.html"
           title="previous chapter">Linting with ESLint</a>
    </ul>



    <p class="menu-label">
        Next
    </p>
    <ul class="menu-list">
        <a href="../es6_imports/index.html"
           title="next chapter">ES6 Imports with Babel</a>
    </ul>


    
    



</aside>
            </div>
        </div>
    </div>

</section>

<footer class="footer is-light">
    <div class="container">
        <div class="content has-text-centered">
            <p>
                Powered by Kaybee, which uses
                <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a>,
                <a href="http://bulma.io">Bulma</a>,
                <a href="http://dectate.readthedocs.io/en/latest/">Dectate</a>,
                <a href="https://pydantic-docs.helpmanual.io">pydantic</a>,
                and more.
            </p>
            <p id="kb-config-copyright">
                &copy; 2018, All Rights Reserved
            </p>
        </div>
    </div>
</footer>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT: '',
        VERSION: '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
    };
</script>

</body>
</html>
