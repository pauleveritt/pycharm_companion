<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Presentation and Container Components</title>
    
        <link rel="icon"
              href="../../../_static/jetbrains_favicon.ico"/>
    
    <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css"
          rel="stylesheet">
    <script src="../../../_static/kaybee_bulma.bundle.js"></script>
    <script src="../../../_static/app.bundle.js"></script>
</head>
<body>

<section>
    <nav id="kbb-navbar" class="navbar is-success"
     role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="../../../index.html">
            
            <img src="../../../_static/PyCharm_Logo.svg.png"
                 alt="PyCharm Logo Alt">
        </a>
        <button class="button navbar-burger" data-target="navMenu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
    <div class="navbar-menu" id="navMenu">
        <div class="navbar-start">
            
                <a class="navbar-item"
                   href="../../../tips/index.html">
                    Tips
                </a>
            
                <a class="navbar-item is-active"
                   href="../../index.html">
                    Tutorials
                </a>
            
                <a class="navbar-item"
                   href="../../../articles/index.html">
                    Articles
                </a>
            
                <a class="navbar-item"
                   href="../../../blogposts/index.html">
                    Blog Posts
                </a>
            
                <a class="navbar-item"
                   href="../../../webinars/index.html">
                    Webinars
                </a>
            
                <a class="navbar-item"
                   href="../../../technologies/index.html">
                    Technologies
                </a>
            
                <a class="navbar-item"
                   href="../../../topics/index.html">
                    Topics
                </a>
            
                <a class="navbar-item"
                   href="../../../authors/index.html">
                    Authors
                </a>
            

        </div>

        <div class="navbar-end">
            
            
        </div>
    </div>
</nav>
</section>
<section
        class="hero is-success"
        style="">
    <div class="hero-head">
    </div>
    
</section>

<section class="section content tutorialstep"
         id="kbb-sphinx-body">
    
    <div class="container">
        <div class="columns">
            <div class="column sb_body">
                <div class="title is-1">
                    Presentation and Container Components
                    
    <span style="background-color: orange; color: white; font-weight: bold;
    font-size: x-small; padding: 0.5em; vertical-align: middle;
    border-radius: 25px">PRO ONLY</span>

                </div>

                <div class="subtitle is-4">Follow the React pattern of container/presentation components by refactoring the code and tests.</div>

                <div id="kbb-sphinx-body" class="content"><div class="section" id="presentation-and-container-components">
<h1>Presentation and Container Components<a class="headerlink" href="#presentation-and-container-components" title="Permalink to this headline">¶</a></h1>
<p>React encourages a separation of concerns. UI components, aka presentation
components, aka dumb components, are created by the bushel and managed by
container components, aka smart components. The container maintains state,
logic, and passes things into the presenation component.</p>
<p>Our Counter component is, as originally intended. Let’s make it a
presentation component by moving the state up to the container (App) and
the incrementing logic as well.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">It’s going to get annoying seeing all the failing tests in
<code class="docutils literal notranslate"><span class="pre">Counter.test.tsx</span></code>, so comment out all but the first test.</p>
</li>
<li><p class="first">Change the props interface to contain, for now, just the optional label
and a value passed in from the container:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">interface</span> <span class="nx">CounterProps</span> <span class="p">{</span>
    <span class="nx">label?</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">count</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Delete the <code class="docutils literal notranslate"><span class="pre">CounterState</span></code> interface, since we won’t be needing it.</p>
</li>
<li><p class="first">Since this is now a very simple, very dumb component, let’s switch it
back to a SFC:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">Counter</span><span class="p">:</span> <span class="n">React</span><span class="o">.</span><span class="n">SFC</span><span class="o">&lt;</span><span class="n">CounterProps</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">{</span><span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Count&#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">}</span>
<span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="n">div</span>
            <span class="n">className</span><span class="o">=</span><span class="s2">&quot;counter&quot;</span>
        <span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">label</span><span class="o">&gt;</span><span class="p">{</span><span class="n">label</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">label</span><span class="o">&gt;</span><span class="p">:</span>
            <span class="o">&lt;</span><span class="n">span</span><span class="o">&gt;</span><span class="p">{</span><span class="n">count</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p class="first">Fix the first test, as this component now needs a (starting) count passed
in:
.. code-block:: typescript</p>
<blockquote>
<div><p>const wrapper = shallow(&lt;Counter count={1}/&gt;);</p>
</div></blockquote>
</li>
<li><p class="first">We now need event handlers. As explained below, these are arrow functions
passed in as props. First, we change the interface to allow this:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">interface</span> <span class="nx">CounterProps</span> <span class="p">{</span>
    <span class="nx">label?</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">count</span>: <span class="kt">number</span><span class="p">;</span>
    <span class="nx">onCounterIncrease</span><span class="o">:</span> <span class="p">(</span><span class="nx">event</span>: <span class="kt">React.MouseEvent</span><span class="o">&lt;</span><span class="nx">HTMLElement</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Add an onClick handler which simple points to this prop:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">onClick</span><span class="o">=</span><span class="p">{</span><span class="n">onCounterIncrease</span><span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">The first test passes but has a compiler warning. We’re missing
<code class="docutils literal notranslate"><span class="pre">onCounterIncrease</span></code>, a mandatory prop. It’s easy to shut up this test,
as it doesn’t test clicking:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">handler</span> <span class="o">=</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nx">shallow</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">Counter</span> <span class="nx">count</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">}</span> <span class="nx">onCounterIncrease</span><span class="o">=</span><span class="p">{</span><span class="nx">handler</span><span class="p">}</span><span class="o">/&gt;</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">jest.fn()</span></code> is a simple mock function.</p>
</li>
<li><p class="first">Uncomment the second and third tests and do the same: add an initial,
define a fake handler, and pass that handler in as a <code class="docutils literal notranslate"><span class="pre">onCounterIncrease</span></code>
prop.</p>
</li>
<li><p class="first">Event handling is a bit trickier. We need a “spy” that tells whether our
passed-in handler gets called, and called the right way. Also, we don’t
test whether the value updates, since the container is responsible for
that:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should increment the count by one&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">handler</span> <span class="o">=</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">();</span>
    <span class="kr">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nx">shallow</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">Counter</span> <span class="nx">count</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">}</span> <span class="nx">onCounterIncrease</span><span class="o">=</span><span class="p">{</span><span class="nx">handler</span><span class="p">}</span><span class="o">/&gt;</span><span class="p">);</span>
    <span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.counter&#39;</span><span class="p">).</span><span class="nx">simulate</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">shiftKey</span>: <span class="kt">false</span><span class="p">});</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">handler</span><span class="p">).</span><span class="nx">toBeCalledWith</span><span class="p">({</span><span class="nx">shiftKey</span>: <span class="kt">false</span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</li>
<li><p class="first">Fix the last test in a similar way. The last test is no longer needed.</p>
</li>
</ol>
<div class="section" id="container-component">
<h3>Container Component<a class="headerlink" href="#container-component" title="Permalink to this headline">¶</a></h3>
<p>Let’s now turn to our container component, <code class="docutils literal notranslate"><span class="pre">App</span></code>.</p>
<ol class="arabic">
<li><p class="first">This component will now have some state. Add the interface and change
the class setup:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">interface</span> <span class="nx">CounterState</span> <span class="p">{</span>
    <span class="nx">count</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">App</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span><span class="o">&lt;</span><span class="p">{},</span> <span class="nx">CounterState</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">(</span><span class="nx">props</span><span class="o">:</span> <span class="p">{})</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">count</span>: <span class="kt">0</span>
        <span class="p">};</span>
    <span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">It will also need the increment method exactly as was on the previous
lesson, but under <code class="docutils literal notranslate"><span class="pre">Counter</span></code>:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nx">increment</span><span class="p">(</span><span class="nx">isShift</span>: <span class="kt">boolean</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">inc</span>: <span class="kt">number</span> <span class="o">=</span> <span class="nx">isShift</span> <span class="o">?</span> <span class="nx">10</span> : <span class="kt">1</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">count</span>: <span class="kt">this.state.count</span> <span class="o">+</span> <span class="nx">inc</span><span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">render</span></code> method’s usage of <code class="docutils literal notranslate"><span class="pre">&lt;Counter/&gt;</span></code> gets richer. It needs to
pass in the state <em>and</em> an arrow-function reference to its <em>own</em>
increment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Counter</span>
    <span class="n">count</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">count</span><span class="p">}</span>
    <span class="n">onCounterIncrease</span><span class="o">=</span><span class="p">{({</span><span class="n">shiftKey</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="n">this</span><span class="o">.</span><span class="n">increment</span><span class="p">(</span><span class="n">shiftKey</span><span class="p">)}</span>
<span class="o">/&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">Now that we’re wired up, let’s give it a try in the browser. Click on the
counter and shift-click to see the number go up.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="what-happened">
<h2>What Happened<a class="headerlink" href="#what-happened" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Would be good to test more of App, but that would mean deeper testing.</li>
</ul>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://www.codementor.io/vijayst/unit-testing-react-components-jest-or-enzyme-du1087lh8">https://www.codementor.io/vijayst/unit-testing-react-components-jest-or-enzyme-du1087lh8</a></li>
</ul>
</div>
</div>
</div>

                

                
                
                    <section class="section kbb-listing">
                        <h2 class="title kbb-listing-heading">This Series</h2>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../project_setup/index.html">Project Setup</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Use PyCharm to create and open the project with all dependencies, then see some of the IDE features in action.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../project_cleanup/index.html">Project Cleanup</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Clean out some unneeded code from the default app, tweak some configuration in the IDE, and tour a few more features.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../styling/index.html">Styling with tslint</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Use the TypeScript linter tslint to manage styling within the IDE, plus helpful hints about limitations.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../testing/index.html">Unit Testing with Jest and Enzyme</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        The Jest test runner integrates productively into PyCharm. Let's put it to work to adopt a test-first approach, including Enzyme for testing convenience.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../nodejs_debugging/index.html">Debugging During Testing With NodeJS</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Work smart by developing with a visual debugger. This lesson shows debugging tests directly in the IDE under the NodeJS debugger.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../chrome_debugging/index.html">Debugging JSX With Chrome</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Sometimes you need to debug in the browser, such as for JSX rendering and events. Use the IDE to remote control Chrome during debugging.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../jsx_es6/index.html">JSX and ES6</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Using React and TypeScript means good JSX and ES6 support in the IDE. This section shows some useful features from both.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../functional_components/index.html">Functional React Components in TypeScript</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        React builds UIs as a tree of components. See how to make stateless functional component correctly with TypeScript.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../props/index.html">Sharing Component Props Using Type Information</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Use type information to make using properties into a productive workflow.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../class_props/index.html">Class Components With Props</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Make a simple class component with a single prop, again with a TypeScript interface describing the props.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../class_state/index.html">Model Class State With TypeScript Interfaces</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Make a very simple class component with local counter state, then make an interface for that state.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../modify_state/index.html">Modify State With Events</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Extend our class component and interface to modify state on click events.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../rich_events_and_testing/index.html">Rich Events and Testing</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Add event more handling to a stateful class component by writing tests during development.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item kbb-listing-active">
                                <div class="kb-listing-title">
                                    <a href="#">Presentation and Container Components</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        Follow the React pattern of container/presentation components by refactoring the code and tests.
                                    </div>
                                
                            </div>
                        
                            
                            <div class="kbb-listing-item">
                                <div class="kb-listing-title">
                                    <a href="../routing/index.html">TypeScript and Routing With Testing</a>
                                </div>
                                
                                    <div class="kb-listing-excerpt">
                                        React single-page applications use client-side routing. Doing that with TypeScript has been a moving target. Let's show a working example.
                                    </div>
                                
                            </div>
                        
                    </section>
                
            </div>

            <div class="column is-3">
                <aside id="sidebarCollapseTarget" class="menu kbb-sidenav">

    <div id="kb-sidenav-published-heading">
    

    
        <p class="menu-label">
            Published
        </p>
        <ul class="menu-list">
            <li>
                Published on
                2018-02-26
                at
                12:00
                
                    by:
                    
                        <a href="../../../authors/pauleveritt/index.html">
                            <figure class="image is-rounded is-24x24"
                                    style="display: inline-block; margin: 0.5rem">
                                <img src="../../../authors/pauleveritt/paul_headshotx24.jpeg">
                            </figure>
                            <span
                                    style="display: inline-block; vertical-align: super">Paul Everitt</span>
                        </a>
                    
                
            </li>
        </ul>
    
</div>
    

    <p class="menu-label">
        Breadcrumbs
    </p>
    <ul class="menu-list">
            <li>
                <a href="../../index.html">
                    
                        <span class="kb-breadcrumb-separator">></span>
                    
                    Tutorials
                </a>
            </li>
            <li>
                <a href="../index.html">
                    
                        <span class="kb-breadcrumb-separator">></span>
                    
                        <span class="kb-breadcrumb-separator">></span>
                    
                    React+TypeScript QuickStart
                </a>
            </li>

    </ul>

    
    <p class="menu-label">
        Previous
    </p>
    <ul class="menu-list">
        <a href="../rich_events_and_testing/index.html"
           title="previous chapter">Rich Events and Testing</a>
    </ul>



    <p class="menu-label">
        Next
    </p>
    <ul class="menu-list">
        <a href="../routing/index.html"
           title="next chapter">TypeScript and Routing With Testing</a>
    </ul>


    
    

    
        <div>
            <p class="menu-label">
                <span style="text-transform: uppercase">technology</span>
            </p>
            <p>
                
                    <a href="../../../technologies/react.html">
                        <span class="tag">react</span>
                    </a>
                
            </p>
        </div>
    



</aside>
            </div>
        </div>
    </div>

</section>

<footer class="footer is-success">
    <div class="container">
        <div class="content has-text-centered">
            <p>
                Powered by Kaybee, which uses
                <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a>,
                <a href="http://bulma.io">Bulma</a>,
                <a href="http://dectate.readthedocs.io/en/latest/">Dectate</a>,
                <a href="https://pydantic-docs.helpmanual.io">pydantic</a>,
                and more.
            </p>
            <p id="kb-config-copyright">
                &copy; 2018, All Rights Reserved
            </p>
        </div>
    </div>
</footer>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT: '',
        VERSION: '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
    };
</script>

</body>
</html>
